{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\api\\clients/assets\\Script\\api\\clients\\PlayerClient.ts"],"names":[],"mappings":";;;;AAAA,YAAY,CAAC;;AACb,2CAA0C;AAE1C,sBAAmC;AAInC;IAGI,sBAAoB,SAA4B,EACpC,cAAsC,EACtC,OAAoB;QAFhC,iBAGC;QAHmB,cAAS,GAAT,SAAS,CAAmB;QACpC,mBAAc,GAAd,cAAc,CAAwB;QACtC,YAAO,GAAP,OAAO,CAAa;QAJtB,qBAAgB,GAAmD,SAAS,CAAC;QAO7E,QAAG,GAAG,UAAO,MAAc,oCAAG,OAAO;;;;;wBACrC,IAAI,GAAW,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM;4BACvC,IAAI,CAAC,SAAS,CAAC,cAAc;4BAC7B,MAAM,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;wBAC3B,QAAQ,GAA6B;4BACvC,MAAM,EAAE,KAAK;4BACb,OAAO,EAAE;gCACL,QAAQ,EAAE,kBAAkB;gCAC5B,gBAAgB,EAAE,YAAU,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,YAAc;6BAC9E;yBACJ,CAAC;wBACK,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAA;4BAA/C,sBAAO,SAAwC,EAAC;;;aACnD,CAAA;QAES,UAAK,GAAG,8CAAU,OAAO;;;;;wBACzB,IAAI,GAAW,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM;4BACvC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;wBAClD,QAAQ,GAA6B;4BACvC,MAAM,EAAE,MAAM;4BACd,OAAO,EAAE;gCACL,QAAQ,EAAE,kBAAkB;gCAC5B,gBAAgB,EAAE,YAAU,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,YAAc;6BAC9E;yBACJ,CAAC;wBACK,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAA;4BAA/C,sBAAO,SAAwC,EAAC;;;aACnD,CAAA;QAMD,SAAI,GAAG,8CAAU,OAAO;;;;4BACO,qBAAM,IAAI,CAAC,KAAK,EAAE,EAAA;;wBAAvC,QAAQ,GAAa,SAAkB;wBACrB,qBAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAA;;wBAAvD,MAAM,GAAY,SAAqC;wBAC7D,sBAAO,MAAM,EAAC;;;aACjB,CAAA;QAES,qBAAgB,GAAG,UAAO,QAAkB,oCAAG,OAAO;;;;;wBACtD,MAAM,GAAW,QAAQ,CAAC,MAAM,CAAC;wBACnC,QAAQ,GAAQ,EAAE,CAAC;wBACvB,IAAI,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE;4BAC9C,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,CAAM,EAAE,CAAM,IAAK,OAAA,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAf,CAAe,CAAC,CAAC;yBACjE;6BAEG,CAAA,MAAM,KAAK,GAAG,CAAA,EAAd,wBAAc;wBACa,qBAAM,QAAQ,CAAC,IAAI,EAAE,EAAA;;wBAA1C,aAAa,GAAQ,SAAqB;wBAC1C,aAAa,GAAQ,aAAa,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;wBACpG,IAAI,GAAQ,OAAO,aAAa,KAAK,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;wBACnE,MAAM,GAAY,IAAI,eAAM,EAAE,CAAC;wBACrC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBAClB,sBAAO,MAAM,EAAC;;6BACP,CAAA,MAAM,KAAK,GAAG,IAAI,MAAM,KAAK,GAAG,CAAA,EAAhC,wBAAgC;wBACZ,qBAAM,QAAQ,CAAC,IAAI,EAAE,EAAA;;wBAA1C,aAAa,GAAQ,SAAqB;wBAChD,sBAAO,iBAAc,CAAC,sCAAsC,EAAE,MAAM,EAAE,aAAa,EAAE,QAAQ,CAAC,EAAC;4BAEnG,sBAAO,OAAO,CAAC,OAAO,CAAsB,IAAI,CAAC,EAAC;;;aACrD,CAAA;IA1DD,CAAC;IA4BK,yBAAE,GAAR;uCAAY,OAAO;;;;4BACa,qBAAM,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAA;;wBAA3C,SAAS,GAAa,SAAqB;wBAC1C,qBAAM,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAA;4BAA7C,sBAAO,SAAsC,EAAC;;;;KACjD;IA4BL,mBAAC;AAAD,CAjEA,AAiEC,IAAA;AAjEY,oCAAY","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\api\\clients","sourcesContent":["\"use strict\";\r\nimport { Player } from \"../models/Player\";\r\n\r\nimport { throwException } from \".\";\r\nimport { IApiConfiguration, ISecurityConfiguration, ISecurityManager } from \"../../oauth/IGameConfiguration\";\r\nimport { IPlayer } from \"../models\";\r\n\r\nexport class PlayerClient {\r\n    protected jsonParseReviver: ((key: string, value: any) => any) | undefined = undefined;\r\n\r\n    constructor(private apiConfig: IApiConfiguration,\r\n        private securityConfig: ISecurityConfiguration,\r\n        private fetcher: GlobalFetch) {\r\n    }\r\n\r\n    protected get = async (action: string): Promise<Response | null> => {\r\n        const url_: string = (this.apiConfig.apiUrl +\r\n            this.apiConfig.playersEnpoint +\r\n            action).replace(/[?&]$/, \"\");\r\n        const options_: RequestInit = <RequestInit>{\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                \"Authentication\": `Bearer ${this.securityConfig.currentToken.access_token}`\r\n            }\r\n        };\r\n        return await this.fetcher.fetch(url_, options_);\r\n    }\r\n\r\n    protected post_ = async (): Promise<Response | null> => {\r\n        const url_: string = (this.apiConfig.apiUrl +\r\n            this.apiConfig.playersEnpoint).replace(/[?&]$/, \"\");\r\n        const options_: RequestInit = <RequestInit>{\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                \"Authentication\": `Bearer ${this.securityConfig.currentToken.access_token}`\r\n            }\r\n        };\r\n        return await this.fetcher.fetch(url_, options_);\r\n    }\r\n    async me(): Promise<IPlayer | null> {\r\n        const _response: Response = await this.get(\"/me\");\r\n        return await this.responseToEntity(_response);\r\n    }\r\n\r\n    post = async (): Promise<IPlayer | null> => {\r\n        const response: Response = await this.post_();\r\n        const player: IPlayer = await this.responseToEntity(response);\r\n        return player;\r\n    }\r\n\r\n    protected responseToEntity = async (response: Response): Promise<IPlayer | null> => {\r\n        const status: number = response.status;\r\n        let _headers: any = {};\r\n        if (response.headers && response.headers.forEach) {\r\n            response.headers.forEach((v: any, k: any) => _headers[k] = v);\r\n        }\r\n\r\n        if (status === 200) {\r\n            const _responseText: any = await response.text();\r\n            const resultData200: any = _responseText === \"\" ? null : JSON.parse(_responseText, this.jsonParseReviver);\r\n            const data: any = typeof resultData200 === \"object\" ? resultData200 : {};\r\n            const entity: IPlayer = new Player();\r\n            entity.init(data);\r\n            return entity;\r\n        } else if (status !== 200 && status !== 204) {\r\n            const _responseText: any = await response.text();\r\n            return throwException(\"An unexpected server error occurred.\", status, _responseText, _headers);\r\n        }\r\n        return Promise.resolve<IPlayer | null>(<any>null);\r\n    }\r\n}\r\n"]}